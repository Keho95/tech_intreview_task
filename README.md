Тестовые кейсы для метода `ProcessDocument`

Для тестирования метода можно выделить следующие сценарии.

1. Успешная обработка корректных данных
- Arrange (Подготовка):
  - Создать корректный JSON-документ с заполненным заголовком и списком строк (например, `{ "header": "Invoice 001", "line_items": ["Item 1", "Item 2"] }`).
  - Замокировать успешную запись в базу данных (`writeToDatabase`).
- Act (Действие):
  - Вызвать метод `ProcessDocument` с корректными данными.
- Assert (Проверка):
  - Проверить, что метод вернул `true` и ошибку `nil`.
  - Проверить, что было записано сообщение об успешной операции в лог.
  - Убедиться, что данные были успешно переданы в метод записи в базу данных.

 2. Ошибка: Некорректный JSON
- Arrange (Подготовка):
  - Создать некорректный JSON (например, `{ "header": "Invoice 001", "line_items": "Not an array" }`).
- Act (Действие):
  - Вызвать метод `ProcessDocument` с некорректными JSON-данными.
- Assert (Проверка):
  - Проверить, что метод вернул `false` и ошибку десериализации JSON.
  - Убедиться, что в лог было записано сообщение об ошибке "Invalid JSON data".
  - Убедиться, что запись в базу данных не была вызвана.

 3. Ошибка валидации: Пустой заголовок
- Arrange (Подготовка):
  - Создать JSON-документ с пустым заголовком (например, `{ "header": "", "line_items": ["Item 1", "Item 2"] }`).
- Act (Действие):
  - Вызвать метод `ProcessDocument` с пустым заголовком.
- Assert (Проверка):
  - Проверить, что метод вернул `false` и ошибку валидации.
  - Убедиться, что в лог было записано сообщение об ошибке "Missing header or line items".
  - Проверить, что запись в базу данных не была вызвана.

 4. Ошибка валидации: Пустой список строк
- Arrange (Подготовка):
  - Создать JSON-документ с корректным заголовком, но пустым списком строк (например, `{ "header": "Invoice 001", "line_items": [] }`).
- Act (Действие):
  - Вызвать метод `ProcessDocument` с пустым списком строк.
- Assert (Проверка):
  - Проверить, что метод вернул `false` и ошибку валидации.
  - Убедиться, что в лог было записано сообщение об ошибке "Missing header or line items".
  - Проверить, что запись в базу данных не была вызвана.

5. Ошибка записи в базу данных
- Arrange (Подготовка):
  - Создать корректный JSON-документ (например, `{ "header": "Invoice 001", "line_items": ["Item 1", "Item 2"] }`).
  - Замокировать неуспешную запись в базу данных (`writeToDatabase`), имитируя ошибку записи.
- Act (Действие):
  - Вызвать метод `ProcessDocument` с корректными данными.
- Assert (Проверка):
  - Проверить, что метод вернул `false` и ошибку записи в базу данных.
  - Убедиться, что в лог было записано сообщение об ошибке "Database write error".
  - Проверить, что вызов записи в базу данных произошел, но завершился с ошибкой.

 Мокирование зависимостей
- Логи: Можно замокировать функции `logError` и `logInfo` для проверки, что они вызываются с правильными сообщениями.
- База данных: Следует замокировать метод `writeToDatabase` для управления успешной или ошибочной записью.

